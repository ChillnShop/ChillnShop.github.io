(function(m,_){typeof exports=="object"&&typeof module<"u"?module.exports=_():typeof define=="function"&&define.amd?define(_):(m=m||self).LazyLoad=_()})(this,function(){"use strict";function m(){return(m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}var _=typeof window<"u",T=_&&!("onscroll"in window)||typeof navigator<"u"&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),D=_&&"IntersectionObserver"in window,F=_&&"classList"in document.createElement("p"),V=_&&window.devicePixelRatio>1,ct={elements_selector:".lazy",container:T||_?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1},j=function(t){return m({},ct,t)},P=function(t,e){var n,a=new t(e);try{n=new CustomEvent("LazyLoad::Initialized",{detail:{instance:a}})}catch{(n=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:a})}window.dispatchEvent(n)},f=function(t,e){return t.getAttribute("data-"+e)},d=function(t,e,n){var a="data-"+e;n!==null?t.setAttribute(a,n):t.removeAttribute(a)},E=function(t){return f(t,"ll-status")},p=function(t,e){return d(t,"ll-status",e)},w=function(t){return p(t,null)},S=function(t){return E(t)===null},U=function(t){return E(t)==="native"},lt=["loading","loaded","applied","error"],v=function(t,e,n,a){t&&(a===void 0?n===void 0?t(e):t(e,n):t(e,n,a))},y=function(t,e){F?t.classList.add(e):t.className+=(t.className?" ":"")+e},z=function(t,e){F?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},$=function(t){return t.llTempImage},A=function(t,e){if(e){var n=e._observer;n&&n.unobserve(t)}},k=function(t,e){t&&(t.loadingCount+=e)},q=function(t,e){t&&(t.toLoadCount=e)},H=function(t){for(var e,n=[],a=0;e=t.children[a];a+=1)e.tagName==="SOURCE"&&n.push(e);return n},g=function(t,e,n){n&&t.setAttribute(e,n)},O=function(t,e){t.removeAttribute(e)},B=function(t){return!!t.llOriginalAttrs},J=function(t){if(!B(t)){var e={};e.src=t.getAttribute("src"),e.srcset=t.getAttribute("srcset"),e.sizes=t.getAttribute("sizes"),t.llOriginalAttrs=e}},K=function(t){if(B(t)){var e=t.llOriginalAttrs;g(t,"src",e.src),g(t,"srcset",e.srcset),g(t,"sizes",e.sizes)}},Q=function(t,e){g(t,"sizes",f(t,e.data_sizes)),g(t,"srcset",f(t,e.data_srcset)),g(t,"src",f(t,e.data_src))},W=function(t){O(t,"src"),O(t,"srcset"),O(t,"sizes")},L=function(t,e){var n=t.parentNode;n&&n.tagName==="PICTURE"&&H(n).forEach(e)},X=function(t,e){H(t).forEach(e)},st={IMG:function(t,e){L(t,function(n){J(n),Q(n,e)}),J(t),Q(t,e)},IFRAME:function(t,e){g(t,"src",f(t,e.data_src))},VIDEO:function(t,e){X(t,function(n){g(n,"src",f(n,e.data_src))}),g(t,"poster",f(t,e.data_poster)),g(t,"src",f(t,e.data_src)),t.load()}},Y=function(t,e){var n=st[t.tagName];n&&n(t,e)},Z=function(t,e,n){k(n,1),y(t,e.class_loading),p(t,"loading"),v(e.callback_loading,t,n)},ut={IMG:function(t,e){d(t,e.data_src,null),d(t,e.data_srcset,null),d(t,e.data_sizes,null),L(t,function(n){d(n,e.data_srcset,null),d(n,e.data_sizes,null)})},IFRAME:function(t,e){d(t,e.data_src,null)},VIDEO:function(t,e){d(t,e.data_src,null),d(t,e.data_poster,null),X(t,function(n){d(n,e.data_src,null)})}},dt=function(t,e){d(t,e.data_bg_multi,null),d(t,e.data_bg_multi_hidpi,null)},tt=function(t,e){var n=ut[t.tagName];n?n(t,e):function(a,i){d(a,i.data_bg,null),d(a,i.data_bg_hidpi,null)}(t,e)},ft=["IMG","IFRAME","VIDEO"],et=function(t,e){!e||function(n){return n.loadingCount>0}(e)||function(n){return n.toLoadCount>0}(e)||v(t.callback_finish,e)},nt=function(t,e,n){t.addEventListener(e,n),t.llEvLisnrs[e]=n},_t=function(t,e,n){t.removeEventListener(e,n)},C=function(t){return!!t.llEvLisnrs},N=function(t){if(C(t)){var e=t.llEvLisnrs;for(var n in e){var a=e[n];_t(t,n,a)}delete t.llEvLisnrs}},at=function(t,e,n){(function(a){delete a.llTempImage})(t),k(n,-1),function(a){a&&(a.toLoadCount-=1)}(n),z(t,e.class_loading),e.unobserve_completed&&A(t,n)},x=function(t,e,n){var a=$(t)||t;C(a)||function(i,c,l){C(i)||(i.llEvLisnrs={});var o=i.tagName==="VIDEO"?"loadeddata":"load";nt(i,o,c),nt(i,"error",l)}(a,function(i){(function(c,l,o,r){var s=U(l);at(l,o,r),y(l,o.class_loaded),p(l,"loaded"),tt(l,o),v(o.callback_loaded,l,r),s||et(o,r)})(0,t,e,n),N(a)},function(i){(function(c,l,o,r){var s=U(l);at(l,o,r),y(l,o.class_error),p(l,"error"),v(o.callback_error,l,r),s||et(o,r)})(0,t,e,n),N(a)})},gt=function(t,e,n){(function(a){a.llTempImage=document.createElement("IMG")})(t),x(t,e,n),function(a,i,c){var l=f(a,i.data_bg),o=f(a,i.data_bg_hidpi),r=V&&o?o:l;r&&(a.style.backgroundImage='url("'.concat(r,'")'),$(a).setAttribute("src",r),Z(a,i,c))}(t,e,n),function(a,i,c){var l=f(a,i.data_bg_multi),o=f(a,i.data_bg_multi_hidpi),r=V&&o?o:l;r&&(a.style.backgroundImage=r,function(s,u,h){y(s,u.class_applied),p(s,"applied"),dt(s,u),u.unobserve_completed&&A(s,u),v(u.callback_applied,s,h)}(a,i,c))}(t,e,n)},M=function(t,e,n){(function(a){return ft.indexOf(a.tagName)>-1})(t)?function(a,i,c){x(a,i,c),Y(a,i),Z(a,i,c)}(t,e,n):gt(t,e,n)},vt=["IMG","IFRAME"],it=function(t){return t.use_native&&"loading"in HTMLImageElement.prototype},pt=function(t,e,n){t.forEach(function(a){return function(i){return i.isIntersecting||i.intersectionRatio>0}(a)?function(i,c,l,o){p(i,"entered"),function(r,s,u){s.unobserve_entered&&A(r,u)}(i,l,o),v(l.callback_enter,i,c,o),function(r){return lt.indexOf(E(r))>=0}(i)||M(i,l,o)}(a.target,a,e,n):function(i,c,l,o){S(i)||(function(r,s,u,h){u.cancel_on_exit&&function(b){return E(b)==="loading"}(r)&&r.tagName==="IMG"&&(N(r),function(b){L(b,function(G){W(G)}),W(b)}(r),function(b){L(b,function(G){K(G)}),K(b)}(r),z(r,u.class_loading),k(h,-1),w(r),v(u.callback_cancel,r,s,h))}(i,c,l,o),v(l.callback_exit,i,c,o))}(a.target,a,e,n)})},rt=function(t){return Array.prototype.slice.call(t)},R=function(t){return t.container.querySelectorAll(t.elements_selector)},bt=function(t){return function(e){return E(e)==="error"}(t)},ot=function(t,e){return function(n){return rt(n).filter(S)}(t||R(e))},I=function(t,e){var n=j(t);this._settings=n,this.loadingCount=0,function(a,i){D&&!it(a)&&(i._observer=new IntersectionObserver(function(c){pt(c,a,i)},function(c){return{root:c.container===document?null:c.container,rootMargin:c.thresholds||c.threshold+"px"}}(a)))}(n,this),function(a,i){_&&window.addEventListener("online",function(){(function(c,l){var o;(o=R(c),rt(o).filter(bt)).forEach(function(r){z(r,c.class_error),w(r)}),l.update()})(a,i)})}(n,this),this.update(e)};return I.prototype={update:function(t){var e,n,a=this._settings,i=ot(t,a);q(this,i.length),!T&&D?it(a)?function(c,l,o){c.forEach(function(r){vt.indexOf(r.tagName)!==-1&&(r.setAttribute("loading","lazy"),function(s,u,h){x(s,u,h),Y(s,u),tt(s,u),p(s,"native")}(r,l,o))}),q(o,0)}(i,a,this):(n=i,function(c){c.disconnect()}(e=this._observer),function(c,l){l.forEach(function(o){c.observe(o)})}(e,n)):this.loadAll(i)},destroy:function(){this._observer&&this._observer.disconnect(),R(this._settings).forEach(function(t){delete t.llOriginalAttrs}),delete this._observer,delete this._settings,delete this.loadingCount,delete this.toLoadCount},loadAll:function(t){var e=this,n=this._settings;ot(t,n).forEach(function(a){A(a,e),M(a,n,e)})}},I.load=function(t,e){var n=j(e);M(t,n)},I.resetStatus=function(t){w(t)},_&&function(t,e){if(e)if(e.length)for(var n,a=0;n=e[a];a+=1)P(t,n);else P(t,e)}(I,window.lazyLoadOptions),I});
